% my $columns = [schema->source($table)->columns];
% my $order = source_id($table);
% my $object = $table;
% my $result = schema->resultset($table)->search(undef, {order_by => { -asc => $order }});
%= tag table => class => "table table-striped table-bordered table-condensed" => begin
  %= tag tr => begin
    % for my $header (@$columns) {
      %= tag th =>  l $header 
    % }
    %= tag th =>  l 'action' 
  %= end
  % while (my $record = $result->next) {
    % my $id = $record->$order;
    %= tag tr => begin
      % for my $col (@$columns) {
        % my $col_base = $col;
        % $col_base =~ s/_id$//;
        % if (schema->source($table)->_relationships->{$col_base} && $record->$col_base->name ) {
          %= tag td => $record->$col_base->name
        % }
        % else {
          %= tag td => $record->$col
        % }
      % }
      %= tag td => begin
        %= tag a => href => "/admin/edit/$object/$id" =>  l 'edit' 
      %= end
    %= end
  % }
%= end

